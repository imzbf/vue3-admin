import{d as x,n as B,k as $,m as D,A as N,N as m,P as u,B as p,C as M,r as i,i as P,e as n,a as o,w as a,c as b,D as R,E as y,l as L,o as _,f as d,p as f,t as g}from"./index-e20ef559.js";import{u as U,l as j,s as z,m as A}from"./index-8a74aba0.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang-e0e899c4.js";const Y={class:"login"},q={class:"login-container"},O={class:"login-form"},T={class:"form-item"},H={class:"form-item"},W={class:"form-item",style:{"margin-bottom":"14px"}},F={class:"forget-p-help cper"},G={class:"form-item"},J={class:"form-item"},Q=R('<ul class="oauth"><li class="cper"><svg class="icon login-icon" aria-hidden="true"><use xlink:href="#icon-facebook"></use></svg></li><li class="cper"><svg class="icon login-icon" aria-hidden="true"><use xlink:href="#icon-google_plus"></use></svg></li><li class="cper"><svg class="icon login-icon" aria-hidden="true"><use xlink:href="#icon-qq"></use></svg></li><li class="cper"><svg class="icon login-icon" aria-hidden="true"><use xlink:href="#icon-wechat"></use></svg></li><li class="cper"><svg class="icon login-icon" aria-hidden="true"><use xlink:href="#icon-github"></use></svg></li></ul>',1),X={class:"login-actions"},Z="Login",ee={name:Z},ne=x({...ee,setup(se){const e=B({info:{username:"admin",password:"admin"},remembered:!0,spinning:!1}),c=$(L),w=D(()=>c.state.setting.theme==="dark"),h=()=>{e.info.username!==""&&e.info.password!==""?(e.spinning=!0,c.dispatch("user/login",{...e.info,remembered:e.remembered}).then(()=>{e.remembered?(localStorage.setItem(p,e.remembered+""),localStorage.setItem(m,e.info.username),localStorage.setItem(u,e.info.password)):(localStorage.removeItem(p),localStorage.removeItem(m),localStorage.removeItem(u))}).catch(s=>{e.spinning=!1,y.error((s==null?void 0:s.msg)||"未知的异常！")})):y.error("登录信息不能为空！")},v=s=>{s.keyCode==13&&h()},k=()=>{c.commit("setting/themeChanged",{theme:c.state.setting.theme==="dark"?"light":"dark"})};return N(()=>{document.addEventListener("keyup",v);const s=localStorage.getItem(m),t=localStorage.getItem(u),l=localStorage.getItem(p);s&&t&&(e.info.username=s,e.info.password=t,e.remembered=!!l)}),M((s,t,l)=>{document.removeEventListener("keyup",v),l()}),(s,t)=>{const l=i("ElIcon"),E=i("ElInput"),S=i("ElCheckbox"),I=i("ElPopconfirm"),V=i("ElButton"),C=i("ElDivider");return _(),P("div",Y,[n("div",q,[n("div",O,[n("div",T,[o(E,{modelValue:e.info.username,"onUpdate:modelValue":t[0]||(t[0]=r=>e.info.username=r),size:"large",type:"text",placeholder:s.$t("用户名"),clearable:""},{prefix:a(()=>[o(l,{class:"el-input__icon"},{default:a(()=>[o(d(U))]),_:1})]),_:1},8,["modelValue","placeholder"])]),n("div",H,[o(E,{modelValue:e.info.password,"onUpdate:modelValue":t[1]||(t[1]=r=>e.info.password=r),size:"large",type:"password",showPassword:"",placeholder:s.$t("密码"),clearable:""},{prefix:a(()=>[o(l,{class:"el-input__icon"},{default:a(()=>[o(d(j))]),_:1})]),_:1},8,["modelValue","placeholder"])]),n("div",W,[o(S,{modelValue:e.remembered,"onUpdate:modelValue":t[2]||(t[2]=r=>e.remembered=r)},{default:a(()=>[f(g(s.$t("记住我")),1)]),_:1},8,["modelValue"]),o(I,{title:s.$t("开发中")},{reference:a(()=>[n("span",F,g(s.$t("忘记密码？")),1)]),_:1},8,["title"])]),n("div",G,[o(V,{type:"primary",style:{width:"100%"},loading:e.spinning,onClick:h},{default:a(()=>[f(g(s.$t("登录")),1)]),_:1},8,["loading"])]),n("div",J,[o(C,null,{default:a(()=>[f("OR")]),_:1}),Q])]),n("div",X,[w.value?(_(),b(l,{key:0,class:"adjust-theme",onClick:k},{default:a(()=>[o(d(z))]),_:1})):(_(),b(l,{key:1,class:"adjust-theme",onClick:k},{default:a(()=>[o(d(A))]),_:1})),o(K,{size:"small"})])])])}}});export{ne as default};
