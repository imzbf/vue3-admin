import{N as d,P as u,R as g,u as z,k as C}from"./index-1a7a4304.js";import{o as L}from"./vue-router-643bf02a.js";import{W as N,Z as U}from"./index-b1848637.js";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang-267a9ddb.js";import{g as v}from"./index-b8a51915.js";import{x as A,V as D,e as b,o as K,z as P,A as s,u as m,P as o,I as i,E as Y,aD as j,a7 as l,y as q,M as p}from"./runtime-core.esm-bundler-65d2a1d3.js";import"./index-421ab8f7.js";const O={class:"login-container"},T={class:"login-asset"},W=["src"],$={class:"login-form"},H=s("h1",{class:"form-title"},"后台管理模板",-1),Z={class:"form-item"},F={class:"form-item"},G={class:"form-item",style:{"margin-bottom":"14px"}},J=s("span",{class:"forget-p-help cper"},"忘记密码？",-1),Q={class:"form-item"},X={class:"form-item"},ee=j('<ul class="oauth"><li class="cper"><svg class="icon login-icon" aria-hidden="true"><use xlink:href="#icon-facebook"></use></svg></li><li class="cper"><svg class="icon login-icon" aria-hidden="true"><use xlink:href="#icon-google_plus"></use></svg></li><li class="cper"><svg class="icon login-icon" aria-hidden="true"><use xlink:href="#icon-qq"></use></svg></li><li class="cper"><svg class="icon login-icon" aria-hidden="true"><use xlink:href="#icon-wechat"></use></svg></li><li class="cper"><svg class="icon login-icon" aria-hidden="true"><use xlink:href="#icon-github"></use></svg></li></ul>',1),oe="Login",se={name:oe},de=A({...se,setup(te){const k=new URL("https://imzbf.github.io/vue3-admin/assets/login-bg-be4dfcf1.svg",self.location).href,y=new URL("https://imzbf.github.io/vue3-admin/assets/login-bg-dark-778521a9.svg",self.location).href,w=new URL("https://imzbf.github.io/vue3-admin/assets/login-body-17b3401e.svg",self.location).href,e=D({info:{username:"admin",password:"admin"},remembered:!0,spinning:!1}),r=z(C),x=b(()=>r.state.setting.theme==="dark"?y:k),S=b(()=>r.state.setting.theme==="dark"?"icon-sun":"icon-moon"),f=()=>{e.info.username!==""&&e.info.password!==""?(e.spinning=!0,r.dispatch("user/login",{...e.info,remembered:e.remembered}).then(()=>{e.remembered?(localStorage.setItem(g,e.remembered+""),localStorage.setItem(d,e.info.username),localStorage.setItem(u,e.info.password)):(localStorage.removeItem(g),localStorage.removeItem(d),localStorage.removeItem(u))}).catch(t=>{e.spinning=!1,v.error((t==null?void 0:t.msg)||"未知的异常！")})):v.error("登录信息不能为空！")},_=t=>{t.keyCode==13&&f()},V=()=>{r.commit("setting/themeChanged",{theme:r.state.setting.theme==="dark"?"light":"dark"})};return K(()=>{document.addEventListener("keyup",_);const t=localStorage.getItem(d),n=localStorage.getItem(u),a=localStorage.getItem(g);t&&n&&(e.info.username=t,e.info.password=n,e.remembered=!!a)}),L((t,n,a)=>{document.removeEventListener("keyup",_),a()}),(t,n)=>{const a=l("el-icon"),h=l("el-input"),E=l("el-checkbox"),I=l("el-popconfirm"),B=l("el-button"),R=l("el-divider");return q(),P("div",{id:"login",class:"login",style:Y({background:`url(${m(w)})`})},[s("div",O,[s("div",T,[s("img",{src:m(x),width:"500"},null,8,W)]),s("div",$,[H,s("div",Z,[o(h,{modelValue:e.info.username,"onUpdate:modelValue":n[0]||(n[0]=c=>e.info.username=c),size:"large",type:"text",placeholder:"username: 1",clearable:""},{prefix:i(()=>[o(a,{class:"el-input__icon"},{default:i(()=>[o(m(N))]),_:1})]),_:1},8,["modelValue"])]),s("div",F,[o(h,{modelValue:e.info.password,"onUpdate:modelValue":n[1]||(n[1]=c=>e.info.password=c),size:"large",type:"password","show-password":"",placeholder:"password: 1",clearable:""},{prefix:i(()=>[o(a,{class:"el-input__icon"},{default:i(()=>[o(m(U))]),_:1})]),_:1},8,["modelValue"])]),s("div",G,[o(E,{modelValue:e.remembered,"onUpdate:modelValue":n[2]||(n[2]=c=>e.remembered=c)},{default:i(()=>[p(" 记住我 ")]),_:1},8,["modelValue"]),o(I,{title:"自行实现！","confirm-button-text":"好的","cancel-button-text":"被迫好的"},{reference:i(()=>[J]),_:1})]),s("div",Q,[o(B,{type:"primary",style:{width:"100%"},loading:e.spinning,onClick:f},{default:i(()=>[p(" 登录 ")]),_:1},8,["loading"])]),s("div",X,[o(R,null,{default:i(()=>[p("OR")]),_:1}),ee])]),o(M,{class:"adjust-theme",type:m(S),onClick:V},null,8,["type"])])],4)}}});export{de as default};
